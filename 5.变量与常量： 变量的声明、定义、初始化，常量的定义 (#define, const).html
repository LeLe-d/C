<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C语言学习 - 变量与常量</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h2 {
            color: #3498db;
            border-left: 5px solid #3498db;
            padding-left: 10px;
            margin-bottom: 20px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        p {
            margin-bottom: 15px;
        }
        ul {
            list-style-type: disc;
            padding-left: 40px;
            margin-bottom: 15px;
        }
        li {
            margin-bottom: 8px;
        }
        pre {
            background-color: #2d2d2d; /* Dark background for code */
            color: #f0f0f0;       /* Light text color */
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;     /* Add scrollbar if code is wide */
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            font-size: 0.95em;
            border: 1px solid #444;
            margin-top: 10px;
        }
        code { /* Inline code style */
            background-color: #e8e8e8;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            color: #c0392b;
        }
        pre code { /* Reset inline style within pre block */
             background-color: transparent;
             padding: 0;
             border-radius: 0;
             color: inherit; /* Inherit color from pre */
        }
        /* Basic Syntax Highlighting */
        .keyword { color: #569cd6; font-weight: bold; } /* Like 'int', 'const' */
        .type { color: #569cd6; } /* Use same color for type names */
        .comment { color: #6a9955; font-style: italic; }
        .function { color: #dcdcaa; }
        .string { color: #ce9178; }
        .number { color: #b5cea8; }
        .operator { color: #d4d4d4; }
        .punctuation { color: #d4d4d4; }
        .directive { color: #c586c0;} /* Purple for directives like #define */
        .macro { color: #9cdcfe; } /* Light blue for macro name */


        strong {
            color: #e67e22;
        }
        .highlight {
             background-color: #fff3cd;
             padding: 1px 3px;
             border-radius: 3px;
             font-weight: bold;
        }
        .note {
            background-color: #eafaf1;
            border-left: 5px solid #2ecc71;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
        .warning {
            background-color: #fdf3e6;
            border-left: 5px solid #f39c12;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>阶段一：基础入门 - 变量与常量</h2>

        <p>在 C 程序中，我们需要存储和操作数据。<strong>变量 (Variable)</strong> 和 <strong>常量 (Constant)</strong> 是用于表示数据的两种基本方式。</p>

        <h3>变量 (Variable)</h3>
        <p>
            变量是程序中用于存储数据的一个<strong>命名的内存位置</strong>。变量的值在程序执行期间<strong>可以改变</strong>。使用变量之前，必须先声明它。
        </p>

        <h4>1. 变量的声明 (Declaration)</h4>
        <p>
            声明变量是告诉编译器变量的<strong>名称 (Identifier)</strong> 和<strong>数据类型 (Data Type)</strong>。这让编译器知道要为该变量预留多少内存空间，以及如何解释这块内存中的数据。
        </p>
        <p><strong>语法：</strong> <code>type variable_name;</code></p>
        <pre><code class="language-c"><span class="type">int</span> count<span class="punctuation">;</span>      <span class="comment">// 声明一个名为 count 的整型变量</span>
<span class="type">float</span> price<span class="punctuation">;</span>    <span class="comment">// 声明一个名为 price 的单精度浮点型变量</span>
<span class="type">char</span> letter<span class="punctuation">;</span>   <span class="comment">// 声明一个名为 letter 的字符型变量</span>
<span class="type">double</span> area<span class="punctuation">,</span> perimeter<span class="punctuation">;</span> <span class="comment">// 可以在一行声明多个同类型的变量，用逗号隔开</span>
</code></pre>

        <h4>2. 变量的定义 (Definition)</h4>
        <p>
            在 C 语言中，对于大多数基本情况（如函数内的局部变量），变量的<strong>声明同时也是定义</strong>。定义是指实际为变量<strong>分配内存空间</strong>。
        </p>
        <p>
            (更严格地区分：声明只是告知编译器变量的存在和类型，可能不分配内存，例如使用 <code>extern</code> 关键字。而定义则一定会分配内存。但在初学阶段，可以认为我们上面写的声明就是定义。)
        </p>

        <h4>3. 变量的初始化 (Initialization)</h4>
        <p>
            初始化是在<strong>定义变量的同时</strong>给它赋一个初始值。这是一个好习惯，因为未初始化的变量包含的是内存中遗留的“垃圾值”，使用它可能导致不可预测的行为。
        </p>
        <p><strong>语法：</strong> <code>type variable_name = initial_value;</code></p>
        <pre><code class="language-c"><span class="type">int</span> score <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span>         <span class="comment">// 声明并初始化 score 为 0</span>
<span class="type">float</span> temperature <span class="operator">=</span> <span class="number">25.5f</span><span class="punctuation">;</span> <span class="comment">// 声明并初始化 temperature</span>
<span class="type">char</span> first_initial <span class="operator">=</span> <span class="string">'M'</span><span class="punctuation">;</span> <span class="comment">// 声明并初始化 first_initial</span>
</code></pre>
        <p>你也可以先声明，然后在后续的代码中通过<strong>赋值 (Assignment)</strong> 语句给变量赋值：</p>
        <pre><code class="language-c"><span class="type">int</span> num<span class="punctuation">;</span>       <span class="comment">// 声明变量 num (此时值不确定)</span>
num <span class="operator">=</span> <span class="number">100</span><span class="punctuation">;</span>    <span class="comment">// 赋值操作，将 100 存入 num</span>
</code></pre>
        <p class="warning"><strong>重要：</strong> 区分<strong>初始化</strong>（在定义时赋值）和<strong>赋值</strong>（在定义后赋值）。强烈建议在定义变量时就进行初始化。</p>

        <h4>变量命名规则 (标识符规则)</h4>
        <ul>
            <li>只能包含字母 (<code>a-z</code>, <code>A-Z</code>)、数字 (<code>0-9</code>) 和下划线 (<code>_</code>)。</li>
            <li>第一个字符<strong>必须</strong>是字母或下划线，不能是数字。</li>
            <li><strong>区分大小写</strong> (<code>age</code> 和 <code>Age</code> 是不同的变量)。</li>
            <li>不能使用 C 语言的<strong>关键字</strong> (如 <code>int</code>, <code>float</code>, <code>if</code>, <code>while</code> 等) 作为变量名。</li>
            <li>变量名应具有描述性，见名知意。</li>
        </ul>

        <h3>常量 (Constant)</h3>
        <p>
            常量是指在程序执行期间其值<strong>不能被修改</strong>的数据。使用常量可以提高代码的可读性和可维护性，并防止意外修改重要数值。
        </p>
        <p>在 C 语言中，定义常量主要有两种方式：</p>

        <h4>1. 使用 <code>#define</code> 预处理指令</h4>
        <p>
            <code>#define</code> 是一个<strong>预处理器指令</strong>，它在编译开始之前进行简单的<strong>文本替换</strong>。它不是 C 语言语句，所以行尾<strong>没有分号</strong>。
        </p>
        <p><strong>语法：</strong> <code>#define CONSTANT_NAME value</code></p>
        <p>按照惯例，使用 <code>#define</code> 定义的常量名通常用<strong>全大写字母</strong>表示，单词间用下划线分隔。</p>
        <pre><code class="language-c"><span class="directive">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="directive">#define</span> <span class="macro">PI</span> <span class="number">3.14159</span>      <span class="comment">// 定义常量 PI</span>
<span class="directive">#define</span> <span class="macro">MAX_CONNECTIONS</span> <span class="number">10</span> <span class="comment">// 定义常量 MAX_CONNECTIONS</span>

<span class="type">int</span> <span class="function">main</span>() {
    <span class="type">double</span> radius <span class="operator">=</span> <span class="number">5.0</span><span class="punctuation">;</span>
    <span class="type">double</span> circumference <span class="operator">=</span> <span class="number">2</span> <span class="operator">*</span> <span class="macro">PI</span> <span class="operator">*</span> radius<span class="punctuation">;</span> <span class="comment">// 编译器处理时会将 PI 替换为 3.14159</span>
    <span class="function">printf</span>(<span class="string">"周长: %f\n"</span>, circumference)<span class="punctuation">;</span>
    <span class="function">printf</span>(<span class="string">"最大连接数: %d\n"</span>, <span class="macro">MAX_CONNECTIONS</span>)<span class="punctuation">;</span>
    <span class="comment">// MAX_CONNECTIONS = 20; // 错误！不能给 #define 定义的常量赋值</span>
    <span class="keyword">return</span> <span class="number">0</span><span class="punctuation">;</span>
}
</code></pre>
        <p><strong>缺点：</strong> <code>#define</code> 只是简单的文本替换，没有类型检查，可能导致一些难以发现的错误，并且不遵循作用域规则。</p>

        <h4>2. 使用 <code>const</code> 关键字</h4>
        <p>
            <code>const</code> 是一个<strong>类型修饰符</strong>，用于声明一个变量为<strong>只读</strong>。它创建的是具有类型的常量，编译器会进行类型检查，并且它遵循变量的作用域规则。这是<strong>更推荐</strong>的定义常量的方式。
        </p>
        <p><strong>语法：</strong> <code>const type constant_name = value;</code></p>
        <pre><code class="language-c"><span class="directive">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">const</span> <span class="type">float</span> PI <span class="operator">=</span> <span class="number">3.14159f</span><span class="punctuation">;</span> <span class="comment">// 定义 float 类型的常量 PI</span>
    <span class="keyword">const</span> <span class="type">int</span> MAX_USERS <span class="operator">=</span> <span class="number">100</span><span class="punctuation">;</span>  <span class="comment">// 定义 int 类型的常量 MAX_USERS</span>

    <span class="type">double</span> radius <span class="operator">=</span> <span class="number">5.0</span><span class="punctuation">;</span>
    <span class="type">double</span> circumference <span class="operator">=</span> <span class="number">2</span> <span class="operator">*</span> PI <span class="operator">*</span> radius<span class="punctuation">;</span>
    <span class="function">printf</span>(<span class="string">"周长 (const): %f\n"</span>, circumference)<span class="punctuation">;</span>
    <span class="function">printf</span>(<span class="string">"最大用户数: %d\n"</span>, MAX_USERS)<span class="punctuation">;</span>

    <span class="comment">// PI = 3.14;         // 编译错误！不能修改 const 常量的值</span>
    <span class="comment">// MAX_USERS = 200;   // 编译错误！</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="punctuation">;</span>
}
</code></pre>
        <p><strong>优点：</strong> 类型安全、遵循作用域、更易于调试。</p>

        <div class="note">
            <strong>总结：</strong>
            <ul>
                <li><strong>变量</strong>是可变的存储位置，使用前需声明（指定类型和名称），最好在定义时初始化。</li>
                <li><strong>常量</strong>是不可变的值，有助于提高代码质量。</li>
                <li>定义常量推荐使用 <code>const</code> 关键字，因为它更安全、更灵活。<code>#define</code> 主要用于宏定义，定义简单常量时应优先考虑 <code>const</code>。</li>
            </ul>
        </div>
    </div>
</body>
</html>